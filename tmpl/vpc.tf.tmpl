## Generated by gomplate at {{ time.Now }}

{{ $vpc := (ds "config").vpc }}
module "vpc" {
  source = "terraform-aws-modules/terraform-aws-vpc?ref={{ $vpc.version }}"

  azs  = local.azs
  cidr = "{{ $vpc.cidr }}"

  enable_nat_gateway = {{ $vpc.enable_nat_gateway }}
  single_nat_gateway = {{ $vpc.single_nat_gateway }}

  private_subnets = [for k in range(0, length(local.azs)) : cidrsubnet("{{ $vpc.cidr }}", 8, k + 8)]
  public_subnets  = [for k in range(0, length(local.azs)) : cidrsubnet("{{ $vpc.cidr }}", 12, k + 8)]
  intra_subnets   = [for k in range(0, length(local.azs)) : cidrsubnet("{{ $vpc.cidr }}", 8, k + 12)]

  enable_ipv6                                   = false
  public_subnet_assign_ipv6_address_on_creation = false

  public_subnet_ipv6_prefixes  = [0, 1, 2]
  private_subnet_ipv6_prefixes = [3, 4, 5]
  intra_subnet_ipv6_prefixes   = [6, 7, 8]
}
